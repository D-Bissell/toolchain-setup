---

# Playbook to test creation of users and registration of variables

- name: Create users tests
  hosts: localhost
  tasks:
  - name: Create users
    user:
      name: "{{ item }}"
      state: present
      comment: "{{ item }} user"
      groups: "docker"
      append: yes
    loop:
      - sabnzbd
      - sonarr
      - radarr
    register: user_accounts

# user_accounts.results.uid is what we want
# both 'name' and 'item' have the username to test for

  - name: Print registered variable user_accounts
    debug:
      var: user_accounts

  - name: Try print the user name and ID for each account
    debug:
      msg: "User {{ item }} has uid {{ item.uid }}"
    loop: "{{ user_accounts.results }}"


    
